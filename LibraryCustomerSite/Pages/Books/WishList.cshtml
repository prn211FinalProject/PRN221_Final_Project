@page
@model LibraryCustomerSite.Pages.Books.WishListModel
@{
    ViewData["Title"] = "Danh sách yêu thích";
}
<h1>Danh sách yêu thích</h1>
<div class="cart-container">
    <div class="cart-header modern-header">
        <input type="checkbox" class="modern-checkbox">
        <div>Sản Phẩm</div>
        <div>Tác giả</div>
        <div>Số Lượng còn lại</div>
        <div>Trạng thái</div>
        <div>Thao Tác</div>
    </div>

    @foreach (var bookCopy in Model.BookCopies)
    {
        <div class="cart-item modern-item">
            <input type="checkbox" class="modern-checkbox">
            <div>
                <div class="shop-name">
                    @bookCopy.BookTitle?.Bname
                </div>
                <div class="product-info">
                    <a asp-page="./Details" asp-route-id="@bookCopy.BookTitle?.Id" class="product-card-link" style="text-decoration: none">
                        <img src="~/images/@bookCopy.BookTitle?.Image" class="product-image modern-image" alt="Product">
                    </a>
                </div>
            </div>

            <div>
                <div class="price">@bookCopy.BookTitle?.Author</div>
            </div>

            <div class="quantity-controls">
                <input type="text" value="@bookCopy.BookTitle?.UnitInStock" class="quantity-input modern-input" readonly>
            </div>

            <div class="price">
                @if (bookCopy.BookTitle?.Quantity >= 1)
                {
                    <span class="shipping-badge in-stock">Còn Hàng</span>
                }
                else
                {
                    <span class="shipping-badge out-of-stock">Hết Hàng</span>
                }
            </div>

            <div class="actions">
                <form method="post" asp-page-handler="RemoveFromWishlist">
                    <input type="hidden" name="id" value="@bookCopy.BookTitleId" />
                    <button type="submit" class="action-btn modern-btn">Xóa khỏi WishList</button>
                </form>
                <form method="get" asp-page="/Books/Borrow" asp-page-handler="Post">
                    <input type="hidden" name="id" value="@bookCopy.BookTitleId" />
                    <button type="submit" class="action-btn modern-btn">Mượn Ngay</button>
                </form>
            </div>
        </div>
    }
    <a href="/Books" class="btn btn-primary modern-back-btn">Quay về</a>
    @if (TempData["SuccessMessage"] != null)
    {
        <div id="success-message" style="display:none;">@TempData["SuccessMessage"]</div>
    }

    @if (TempData["ErrorMessage"] != null)
    {
        <div id="error-message" style="display:none;">@TempData["ErrorMessage"]</div>
    }

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var successMessage = document.getElementById("success-message");
            if (successMessage) {
                alert(successMessage.innerText);
            }

            var errorMessage = document.getElementById("error-message");
            if (errorMessage) {
                alert(errorMessage.innerText);
            }
        });
    </script>
</div>

<style>
    .modern-header, .modern-item {
        display: flex;
        align-items: center;
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }
    .modern-checkbox {
        margin-right: 10px;
    }
    .modern-image {
        width: 40%;
        border-radius: 5px;
    }
    .modern-input {
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 5px;
    }
    .in-stock {
        color: green;
    }
    .out-of-stock {
        color: red;
    }
    .modern-btn {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.3s;
    }
    .modern-btn:hover {
        background-color: #0056b3;
    }
    .modern-back-btn {
        display: inline-block;
        margin-top: 20px;
        padding: 10px 20px;
        background-color: #007bff;
        color: white;
        border-radius: 5px;
        text-align: center;
        text-decoration: none;
        transition: background-color 0.3s;
    }
    .modern-back-btn:hover {
        background-color: #0056b3;
    }
</style>
